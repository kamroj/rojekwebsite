---
import SiteLayout from '../../../layouts/SiteLayout.astro';
import { getI18nResources } from '../../../lib/i18n/resources.js';
import ProductsIndexSsg from '../../../components/_astro/ssg/ProductsIndexSsg.jsx';
import {
  fetchProductsCategoryCardImagesForBuild,
  fetchProductsIndexCountsForBuild,
  fetchProductsPageSettingsForBuild,
} from '../../../lib/sanity/build.js';

const resources = await getI18nResources('en');
const initialProductCountsByCategory = await fetchProductsIndexCountsForBuild('en');
const productsPageSettings = await fetchProductsPageSettingsForBuild();
const categoryCardImages = await fetchProductsCategoryCardImagesForBuild();
---

<SiteLayout
  lang="en"
  title="Products â€“ ROJEK | Windows, doors, gates & shutters"
  description="ROJEK products: windows, doors, gates and shutters. Browse categories and choose the right solution."
>
  <ProductsIndexSsg
    lang="en"
    resources={resources}
    initialProductCountsByCategory={initialProductCountsByCategory}
    productsHeaderImage={productsPageSettings?.headerImage || null}
    categoryCardImages={categoryCardImages}
  />
</SiteLayout>
